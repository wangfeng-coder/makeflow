分享文档
======

makeflow流程引擎框架
-------

**作者：** 王峰

**日期：** 2023.10.20
**版本：** 1.0
--

### 流程引擎是什么？

流程引擎说白了就是用来驱动业务按照我设定的固定流程去流转的东西，在复杂多变的业务情况下，使用既定的流程能够大大降低我们设计业务的成本，并且保证了我们业务执行的准确性。

 eg1 : 企业常见审批

![](file:///D:/company/Document/makeflow/%E5%88%86%E4%BA%AB/pic/5e27ac7fd61d7a3ae766796974d4b881.jpeg)

eg2:网上购物业务



![](file:///D:/company/Document/makeflow/%E5%88%86%E4%BA%AB/pic/dcbce85fbd0e8e605d71313a9ed5ae3a.jpeg)

## 

## 介绍一下目前已有的开源流程框架

当比较不同的流程引擎框架时，使用表格是一种清晰和有效的方式来展示它们的介绍及优缺点。以下是一个示例表格，用于比较不同流程引擎框架：

| **框架**   | **介绍**                                 | **优点**                                     | **缺点**                                                               |
| -------- | -------------------------------------- | ------------------------------------------ | -------------------------------------------------------------------- |
| Activiti | - 基于BPMN 2.0标准的开源流程引擎。 - 支持流程建模、执行和管理。 | - 易于使用的图形化设计器。 - 大型社区和活跃的开发。 - 丰富的扩展库。     | - 由于历史悠久，比较复杂，代码量30万+。 - 集成到其他框架可能需要一些工作。<br/><br/>-定制化功能可能要去覆盖源码，难看 |
| Camunda  | - 基于Activiti的分支，提供了类似的功能，但更注重开发友好性。    | - 简单易用的API和界面。 - 高度可扩展性和定制性。 - 社区支持。       | - 某些高级功能需要付费版。 - 对于大型流程，可能需要一些性能优化。                                  |
| jBPM     | - 由Red Hat维护的开源流程引擎，支持BPMN 2.0。        | - 与JEE和Spring集成良好。 - 完全的开源解决方案。 - 企业级支持。   | - 学习曲线较陡峭，不太适合初学者。 - 社区相对较小。                                         |
| Flowable | - 基于Activiti的分支，旨在提供更轻量级的解决方案。         | - 高度灵活的引擎。 - 适用于微服务架构。 - 易于集成。             | - 社区相对较小。 - 功能可能没有Activiti和Camunda全面。                                |
| Zeebe    | - 分布式的微服务流程引擎，可处理大规模的工作流程。             | - 高度可扩展性和性能。 - 面向云原生架构。 - 支持多语言客户端。        | - 较新的项目，可能存在不稳定性。 - 学习资源相对较少。                                        |
| Bonita   | - 开源的BPM和数字流程自动化平台，强调低代码开发。            | - 易于使用的低代码平台。 - 可视化设计工具。 - 支持业务和技术用户。      | - 社区相对较小。 - 高级功能需要企业版。                                               |
| Flowable | - 轻量级、嵌入式流程引擎，适用于Java应用程序内部嵌入。         | - 与Spring Boot完美集成。 - 嵌入式和可嵌入式模式。 - 高度灵活性。 | - 功能相对较少。 - 不适合大规模分布式流程。                                             |

看了这么多流程引擎 各有各的优势 ，没有用过的同学选择起来很难，很难做到平衡，找到适合自己业务的工作流引擎

网上推荐Camunda ，引擎性能和稳定性更好。



## 为什么很多公司都是自己研发的流程引擎呢？

1. **定制化业务流程**：自研流程引擎允许组织创建与其业务需求完全匹配的自定义工作流程。这些流程可以包括特定的批准流程、数据处理流程、报告生成等。

2. **特定性能需求**：一些组织需要处理大规模的流程，要求高性能和可伸缩性。通过自主研发，可以更好地优化和调整引擎以满足这些性能需求。

3. **灵活的集成**：自研流程引擎可以更好地与现有的应用程序、数据存储和第三方服务进行集成，以实现更高级的工作流程自动化。

4. **知识产权控制**：对于某些组织，知识产权是至关重要的。通过自主研发，可以确保对引擎的所有知识产权拥有完全的控制。

5. **数据隐私和合规性**：某些行业和法规要求对数据的处理和流程进行额外的保护和合规性控制。自研流程引擎可以更好地满足这些要求。

6. **复杂的审批和决策逻辑**：某些流程可能需要高度复杂的审批和决策逻辑，超出了一些通用引擎的范围。通过自主研发，可以灵活地构建和管理这些逻辑。

7. **数据处理和转换**：自主研发的流程引擎可以用于数据处理、转换和工作流自动化，以支持特定的业务需求，例如ETL（提取、转换、加载）过程。

8. **长期战略**：对于长期战略，组织可能希望自主研发流程引擎，以满足未来的需求，而不仅仅是当前的需求。这可以为组织提供更大的灵活性和可控性。

目录
--

1. [功能概览](https://chat.openai.com/c/a6d571da-283d-4cf8-812a-83ea6a6c2d04#%E5%8A%9F%E8%83%BD%E6%A6%82%E8%A7%88)

2. [架构概述](https://chat.openai.com/c/a6d571da-283d-4cf8-812a-83ea6a6c2d04#%E6%9E%B6%E6%9E%84%E6%A6%82%E8%BF%B0)

3. [安装与配置](https://chat.openai.com/c/a6d571da-283d-4cf8-812a-83ea6a6c2d04#%E5%AE%89%E8%A3%85%E4%B8%8E%E9%85%8D%E7%BD%AE)

4. [使用指南](https://chat.openai.com/c/a6d571da-283d-4cf8-812a-83ea6a6c2d04#%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97)

5. [高级功能](https://chat.openai.com/c/a6d571da-283d-4cf8-812a-83ea6a6c2d04#%E9%AB%98%E7%BA%A7%E5%8A%9F%E8%83%BD)

6. [性能和扩展性](https://chat.openai.com/c/a6d571da-283d-4cf8-812a-83ea6a6c2d04#%E6%80%A7%E8%83%BD%E5%92%8C%E6%89%A9%E5%B1%95%E6%80%A7)

7. [示例代码](https://chat.openai.com/c/a6d571da-283d-4cf8-812a-83ea6a6c2d04#%E7%A4%BA%E4%BE%8B%E4%BB%A3%E7%A0%81)

8. [常见问题解答](https://chat.openai.com/c/a6d571da-283d-4cf8-812a-83ea6a6c2d04#%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E8%A7%A3%E7%AD%94)

9. [附加资源](https://chat.openai.com/c/a6d571da-283d-4cf8-812a-83ea6a6c2d04#%E9%99%84%E5%8A%A0%E8%B5%84%E6%BA%90)

10. [反馈与支持](https://chat.openai.com/c/a6d571da-283d-4cf8-812a-83ea6a6c2d04#%E5%8F%8D%E9%A6%88%E4%B8%8E%E6%94%AF%E6%8C%81)
    
    

### 1.功能概览

- [ ] 发布流程模板

- [ ] 发起流程

- [ ] 流程分支条件表达式流转

- [ ] 支持多单人的人工活动的处理

- [ ] 支持自定义参数贯穿整个业务流程

- [ ] 完成/拒绝/驳回到任意节点/强制跳转到任意节点

- [ ] 支持基于Event-listener的方式去支持业务能力

- [ ] 借助mybatis和spring-mongodb-data来适配关系型数据库和非关系性数据库
  
  

------

2. ### 架构概述

工程模块介绍

如何拆分：

* 按业务功能（无状态） : 便于服务扩容，业务逻辑理解

* 按是否数据量大,长IO

* 数据库 : 此处将数据库操作单独提出来，防止以后对应模块作为服务的时候，集群数量限制于数据库本身连接数以及便于数据源类型的切换不影响原有逻辑。数据源切换适配等
  
  | 模块名                              | 描述                           |
  | -------------------------------- | ---------------------------- |
  | makeflow-form-api                | 表单服务的api，用于其他模块服或务*调用**      |
  | makeflow-form-data               | 表单服务单纯对*数据库**的操作             |
  | makeflow-form-servie             | 表单服务(核心*逻辑**)                |
  | **makeflow-template-api**        | 模板服务的api，用于其他模块或服务*调用**      |
  | **makeflow-template-data**       | 模板服务单纯对*数据库**的操作             |
  | **makeflow-template-service**    | 模板服务(核心**逻辑**)               |
  | **makeflow-workflow-api**        | 工作流引擎的api，用于其他模块或服务*调用**     |
  | **makeflow-workflow-data**       | 工作流引擎单纯对**数据库**的操作           |
  | **makeflow-workflow-service**    | 工作量引擎服务(核心**逻辑**)            |
  | makeflow-document-api            | 文档操作对的api,用于其他模块或服务**调用**    |
  | makeflow-document-service        | 文档操作(核心*逻辑**)                |
  | makeflow-push-service            | 相关事件***推送***，和三方系统**异步***】交互 |
  | **makeflow-basic-service**       | 代码的相关**配置**或*约定*             |
  | **makeflow-service-application** | springboot启动的地方，框架入口         |

> 约定：代码包名创建规则 com.makeid.makeflow.{{模块名}}.. 如com.makeid.makeflow.workflow.service







-------

这个部分解释了你的项目或工具的架构，包括主要组件和它们之间的交互。这可以帮助读者理解它是如何工作的。

3. 安装与配置

--------

提供关于如何安装、配置和启动你的项目或工具的详细指南。包括设置步骤、配置文件示例和基本用法示例。

4. 使用指南

-------

在这里提供一个用户指南，包括如何使用你的项目或工具的详细说明。可以包括命令行示例、界面截图等。

5. 高级功能

-------

如果你的项目或工具有一些高级功能或自定义选项，详细解释如何使用它们。这对于那些希望深入使用的人很有用。

6. 性能和扩展性

---------

如果可能的话，提供关于你的项目或工具的性能和扩展性的信息。这可以帮助读者评估它是否适合他们的需求。

7. 示例代码

-------

如果你有一些示例代码或示例项目，可以在文档中包含它们。这有助于读者更容易地上手。

8. 常见问题解答

---------

列出一些常见问题和解决方案，以帮助读者解决潜在的困难。

9. 附加资源

-------

* **演示或演讲：** 如果可能的话，创建一个演示或演讲，以便亲自向团队成员展示项目或工具。

* **在线教程或培训：** 如果项目复杂，可以创建在线教程或培训材料，以便深入学习。
10. 反馈与支持

---------

、
